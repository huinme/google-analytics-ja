# Dispatching - iOS SDK

このドキュメントでは、Google Analytics SDK for iOS v2を利用してどのようにGoogle Analyticsのデータをディスパッチ可能かについて説明しています.

- [オーバービュー](#overview)
- [定期的なディスパッチ](#periodic-dispatch)
- [手動のディスパッチ](#manual-dispatch)

## <a name="overview"></a>オーバービュー

Google Analytics SDK for iOSでは、スクリーンビューやイベントなどの収集されたデータはGoogle Analyticsのサーバーに送信される間にローカルキューに保存されます.
それらのデータのピース(ここでは"hits"と呼びます)がSDKからGoogle Analyticsに送信されるプロセスはディスパッチとして知られています.

ディスパッチはモバイルコレクションライブラリに固有のものであり、不安定なネットワークやバッテリーの制約といった困難を緩和するために設計されています.

ディスパッチには２種類存在します.

- 定期的なディスパッチ : あなたが指定した期間で自動的にhitsをディスパッチします.
- 手動ディスパッチ : 手動でのhitsのディスパッチは、例えば既にHTTPコネクションが存在する場合には、便利です.

このドキュメントの残りの部分では、それぞれのタイプのディスパッチのより深い部分についてと、それらをアプリにどう実装すべきかについて説明します.

>**NOTE:** データは必ずディスパッチされ、各プロファイルで設定されたタイムゾーンにおいて翌日の4 a.m.までに受信されなければなりません. その後に受信されたいかなるデータもレポートには表示されません.

## <a name="periodic-dispatch"></a>定期的なディスパッチ

アプリが収集したGAデータは、キューに追加され定期的にGoogle Analyticsに送信されます. 定期的なディスパッチはアプリがフォアグラウンドとバックグラウンドどちらの場合にも発生します.

デフォルトのディスパッチ間隔は2分です.
`setDispatchPeriod:(NSTimeInterval)`を呼ぶことで、
以下の例のように自身で間隔を設定することもできます.

```
[[GAI sharedInstance] setDispatchPeriod:60];
```

マイナスの値を設定することで定期的なディスパッチを無効にすることもできます. その場合には、データをGoogle Analyticsに送信するために手動ディスパッチを利用する必要があります.
また、ディスパッチ間隔に0を指定した場合には、ネットワークコネクションが利用可能な場合に各hitは即座に送信されます.

いったん全てのでhitsがディスパッチされると、
定期ディスパッチはパワーセーブモードに入り、
別の送信が呼び出されるまで無効になります.

もしユーザーがネットワークアクセスを失ったり、ディスパッチされていないhitsが残っているのにアプリを終了した場合には、それらのhitsはローカルストレージに保存されます. それらのhitsは次回アプリ起動中にディスパッチが行われるときに合わせてディスパッチされます.

## <a name="manual-dispatch"></a>手動のディスパッチ

信頼出来る定期ディスパッチとは別に、手動でhitsをディスパッチしたい時があります.
例えば、オーバーヘッドを減らすために、アプリケーションが生成した他のHTTPリクエストとまとめてしまいたい場合です.

hitsは以下のように`dispatch`を呼び出すことで手動でディスパッチすることができます.

```
[[GAI sharedTracker] dispatch];
```

- - -

[Noted](https://developers.google.com/readme/policies?hl=ja)を覗いて、このページの内容は[Creative Commons Attribution 3.0 License](http://creativecommons.org/licenses/by/3.0/)の下で提供されています. またコードサンプルは [Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0) の下で提供されています

 Last updated 1月 9, 2013.